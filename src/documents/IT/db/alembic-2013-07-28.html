---
layout: IT
title: alembic
date: '2013-07-28'
comments: true
adsense: true
ignored: true
tags:
- alembic
- db
- development
- IT
- migration
- Python
- sqlalchemy
---

<h2 id="article_summary" class="summary">데이터베이스 마이그레이션 관리를 간편하게! alembic.</h2><p>alembic은 파이썬 SQLAlchemy DB Toolkit과 연동하여 마이그레이션 관리를 돕는 편리한 도구입니다.</p><p><strong>프로젝트 폴더로 가서 alembic을 초기화 한다.</strong><br /><code>alembic init alembic</code></p><p><strong>alembic.ini파일에서 데이터 베이스를 설정해 준다.</strong><br /><code>sqlalchemy.url = mysql://scott:tiger@localhost/test</code></p><p><strong>마이그레이션을 자동으로 생성하기 위해 다음을 alembic/env.py에 추가한다.</strong><br /><code>import os, sys<br />sys.path.append(os.getcwd())<br />from application import db<br />target_metadata = db.Model.metadata</code><br />* 자동 생성에서는 테이블명이나 컬럼명을 변경한 것은 감지하지 못한다.</p><p><strong>다음 커멘드를 이용해 자동으로 마이그레이션을 생성한다.</strong><br /><code>alembic revision --autogenerate -m "Added account table"</code></p><p><strong>DB를 새 마이그레이션으로 업그레이드 하려면?</strong><br /><code>alembic upgrade head</code></p><p><strong>원하는 마이그레이션으로 업그레이드 하거나 다운그레이드 하려면?</strong><br /><code>$ alembic upgrade +2<br />$ alembic downgrade -1</code></p><h3><a title="alembic tutorial" href="http://alembic.readthedocs.org/en/latest/tutorial.html" target="_blank">alembic 튜토리얼</a></h3>
