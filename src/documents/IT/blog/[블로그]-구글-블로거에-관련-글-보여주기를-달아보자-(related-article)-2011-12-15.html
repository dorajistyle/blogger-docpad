---
layout: IT
title: "[블로그] 구글 블로거에 관련 글 보여주기를 달아보자. (Related article)"
date: '2011-12-15'
comments: true
adsense: true
ignored: true
tags:
- blog
- IT
- "관련글"
- "구글"
- "모듈"
- "블로그"
- "소스"
- "템플릿"
---

<p><h2 id="article_summary" class="summary">구글 블로거에 관련 글 보여주기를 추가하는 방법입니다.</h2></p><p>블로그 새단장을 준비하며, 예전에 짜 두었던 관련 글 보여주기 소스를 좀 개선했습니다.<br />내 블로그에서 같은 태그가 달린 글을 검색해서 관련 글로 보여줘요.<br />관련글 보여주기를 달기 위해선 템플릿(스킨)을 수정해야 합니다.<br />구글 블로거에 관련 글 보여주기를 달고 싶은 분은, 마음껏 가져다 쓰세요.:D</p><p><strong>Head 태그 안에 다음 코드를 추가 해 줍니다.(<span style="color: #ff0000;"><a title="Google API Sign Up" href="http://code.google.com/apis/maps/signup.html" target="_blank">구글 API키</a> 필요</span>)</strong><br /><code><br />&lt;script src='http://www.google.com/jsapi?key=MY<em>API</em>KEY' type='text/javascript'/&gt;<br /></code></p><p><strong>스타일 시트에 다음 코드를 추가 해 줍니다.</strong><br /><code><br />#related-side{display:none;visibility:hidden;} #related-posts{padding:15px;}<br /></code></p><p><strong>구글 블로거 템플릿에서 &lt;data:post.body/&gt;를 검색해서, &lt;data:post.body/&gt; 아래에 다음 코드를 추가해 줍니다.</strong><br /><code><br />&lt;aside id="related-side"&gt;<br />&lt;br/&gt;<br />&lt;h4&gt;&lt;data:post.title/&gt; 관련 글&lt;/h4&gt;<br />&lt;div id='related-posts'/&gt;<br />&lt;/aside&gt;<br />&lt;script type='text/javascript'&gt;<br />// 구글 블로거용 관련글 검색 모듈 by 月風(http://dorajistyle.pe.kr)<br />google.load(&amp;quot;gdata&amp;quot;, &amp;quot;1.x&amp;quot;, { packages : [&amp;quot;blogger&amp;quot;] });<br />&nbsp;&nbsp;&nbsp; function getRelated() {<br />&nbsp;&nbsp;&nbsp; function eliminateDuplicates(arr) {var i,j=0,len=arr.length,out="",obj={};for (i=0;i&amp;lt;len;i++) {obj[arr[i]]=0;}for (i in obj) {if(j&gt;=9)break; out+=i;j++;}return out;}&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; var relPostArray = new Array();<br />&nbsp;&nbsp;&nbsp; var funcvar1=0;&nbsp;&nbsp;&nbsp; var bloggerService = new google.gdata.blogger.BloggerService(&amp;#39;dorajistyle<em>related</em>posts&amp;#39;);<br />&nbsp;&nbsp;&nbsp; var handleQueryResults = function(resultsFeedRoot) {&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; var blogFeed = resultsFeedRoot.feed;var html,postTitle,entryUri;var postEntries = blogFeed.getEntries();for (var i = 0; postEntry = postEntries[i]; i++) {var postTitle=postEntry.getTitle().getText(),entryUri=postEntry.getHtmlLink().getHref();if(title==postTitle) continue;var html= &amp;#39;&amp;lt;li&amp;gt;&amp;lt;a rel=\&amp;#39;bookmark\&amp;#39; title=\&amp;#39;&amp;#39;+ postTitle + &amp;#39;\&amp;#39; href=\&amp;#39;&amp;#39;+entryUri+&amp;#39;\&amp;#39;&amp;gt;&amp;#39;+ postTitle + &amp;#39;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&amp;#39;;<br />&nbsp;&nbsp;&nbsp; relPostArray.push(html);}&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; funcvar1++;&nbsp;&nbsp;&nbsp; if (funcvar1 == filtArray.length) {var urlfinal=eliminateDuplicates(relPostArray);if(urlfinal.length&gt;0){var aside=document.getElementById(&amp;quot;related-side&amp;quot;);aside.style.display=&amp;#39;block&amp;#39;;aside.style.visibility=&amp;#39;visible&amp;#39;;var elem=document.getElementById(&amp;quot;related-posts&amp;quot;);var content=&amp;#39;&amp;lt;ul&amp;gt;&amp;#39;;content+=urlfinal;content+=&amp;#39;&amp;lt;/ul&amp;gt;&amp;#39;;<br />&nbsp;&nbsp;&nbsp; elem.innerHtml=&amp;#39;&amp;lt;ul&amp;gt;&amp;#39;;elem.innerHTML=urlfinal;elem.innerHtml+=&amp;#39;&amp;lt;/ul&amp;gt;&amp;#39;;elem.innerHtml+=content;}}<br />&nbsp;&nbsp;&nbsp; };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; var handleError = function(error) {};<br />&nbsp;&nbsp;&nbsp; var tagString=&amp;#39;&amp;#39;;<br />&nbsp;&nbsp;&nbsp; var labelArray = new Array();&lt;b:loop values='data:post.labels' var='label'&gt;<br />&nbsp;&nbsp;&nbsp; tagString+=&amp;quot;&lt;data:label.name/&gt;&amp;quot;;<br />&nbsp;&nbsp;&nbsp; tagString+=&amp;#39;,&amp;#39;<br />&nbsp;&nbsp;&nbsp; &lt;/b:loop&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; tagString=tagString.substring(0,tagString.length-1);<br />&nbsp;&nbsp;&nbsp; var filtArray = tagString.split(&amp;#39;,&amp;#39;);var title =&amp;#39;&lt;data:post.title/&gt;&amp;#39;;<br />&nbsp;&nbsp;&nbsp; var feedUri,query;&nbsp;&nbsp;&nbsp; for (var i = 0; i &amp;lt; filtArray.length; i++){feedUri = &amp;#39;/feeds/posts/default/-/&amp;#39; + filtArray[i]; query = new google.gdata.blogger.BlogPostQuery(feedUri);&nbsp;&nbsp;&nbsp; bloggerService.getBlogPostFeed(query, handleQueryResults, handleError);}<br />&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; google.setOnLoadCallback(getRelated);<br />&lt;/script&gt;<br /></code></p><p>구글 블로거용 관련글 보여주기 모듈로, 블로그 방문자들에게 편의를 제공하세요.:D</p>
