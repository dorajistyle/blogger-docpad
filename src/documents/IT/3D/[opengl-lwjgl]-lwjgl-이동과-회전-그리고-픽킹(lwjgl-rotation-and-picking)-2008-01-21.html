---
layout: IT
title: "[OPENGL,LWJGL] LWJGL 이동과 회전 그리고 픽킹(LWJGL - Rotation and Picking)"
date: '2008-01-21'
comments: true
adsense: true
ignored: true
tags:
- 3D
- IT
- LWJGL
- openGL
- Picking
- Rotation
- "오픈GL"
- "이동"
- "픽킹"
- "회전"
---

<div class="imageblock left" style="float: left; text-align: center; padding: 10px;"><img src="http://images.google.com/images?q=tbn:rWl8OG-5OfCGGM::www.lwjgl.org/_gfx/installation/eclipse-1.png" alt="LWJGL 이동과 회전(LWJGL - Rotation and Picking)[LWJGL,이동,회전,Rotation and Picking,lwjgl.org,Lightweight Java Game Library]" height="109" width="130"><p style="margin-top: 5px;"><span>이미지출처</span>&nbsp;: <a href="http://www.lwjgl.org/installation.php" onclick="window.open(this.href);return false;"><span style="color: rgb(0, 128, 0);">www.lwjgl.org</span></a></p></div><b><font size="3">LWJGL 이동과 회전 그리고 픽킹(LWJGL - Rotation and Picking)</font></b><p></p><p><b></b></p><p><b><b></b></b></p><p><b><b><b></b></b></b></p><p><b><b><b><b></b></b></b></b></p><p><b><b><b><b><b></b></b></b></b></b></p><p><b><b><b><b><b><b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b>물체의 이동과 회전</b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><br /></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b><p class="amcode"><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b>Code:</b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><div class="codeblock amc_code amc_short"><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b><table><tbody><tr class="amc_code_odd"><td><code><span class="amc_default">GL11.glTranslatef(this.xoff, this.yoff, this.zoff-this.centerAvgXYZ);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; GL11.glRotatef(this.xrot, 1.0f, 0.0f, 0.0f);</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; GL11.glRotatef(this.yrot, 0.0f, 1.0f, 0.0f);</span></code></td></tr></tbody></table></div><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><br /><br /></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b><p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b>Picking </b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><br /></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b><p class="amcode"><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b>Code:</b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></p><div class="codeblock amc_code amc_long"><blockquote><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b><b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b></b><table><tbody><tr class="amc_code_even"><td><code><span class="amc_default">public void SelectObjects(int x, int y) {</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; int hits;</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; int[] viewport = new int[4];</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; int buffer[] = new int[256];</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; IntBuffer selectBuff = ByteBuffer.allocateDirect(1024).order(ByteOrder.nativeOrder()).asIntBuffer();</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; IntBuffer vpBuffer = ByteBuffer.allocateDirect(64).order(ByteOrder.nativeOrder()).asIntBuffer();</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glGetInteger(GL11.GL_VIEWPORT, vpBuffer);</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; vpBuffer.get(viewport);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glSelectBuffer(selectBuff);</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glMatrixMode(GL11.GL_PROJECTION);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glPushMatrix();</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glRenderMode(GL11.GL_SELECT);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glLoadIdentity();</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GLU.gluPickMatrix((float)x,(float)(viewport[3]-y), 5.0f, 5.0f, viewport); &nbsp; &nbsp;</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; GLU.gluPerspective(45.0f, ratio, 0.001f, 100.0f); </span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Rectangle rect = this.canvas.getClientArea(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ratio = (float) rect.width / (float) rect.height;</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; </span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glMatrixMode(GL11.GL_MODELVIEW); // 물체를 그려줄때는 다시 모델뷰로..</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; drawScatterPlot(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 물체를 그려주고,</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glRotatef(this.xrot, 1.0f, 0.0f, 0.0f); &nbsp;// 그 후에 회전을 해준다.</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; GL11.glRotatef(this.yrot, 0.0f, 1.0f, 0.0f);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; </span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; hits = GL11.glRenderMode(GL11.GL_RENDER);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; System.out.println("Hits : "+hits);</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; selectBuff.get(buffer);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; if(hits&gt;0) {</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; int selectedObjID = buffer[3];</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; int depth = buffer[1];</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (int i = 1; i &lt; hits; i++) {</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (buffer[i * 4 + 1] &lt; (int) depth) {</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selectedObjID = buffer[i * 4 + 3]; </span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depth = buffer[i * 4 + 1];</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ProcessSelect(selectedObjID);</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; }</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glMatrixMode(GL11.GL_PROJECTION); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glPopMatrix(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glFlush();</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; GL11.glMatrixMode(GL11.GL_MODELVIEW); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; }</span></code></td></tr></tbody></table></blockquote><table><tbody> </tbody></table></div>
