---
layout: IT
title: "[이클립스RCP(ECLIPSE RCP)] EclipseRCP 환경설정 페이지 사용하기(EclipseRCP Preference Page)"
date: '2008-02-27'
comments: true
adsense: true
ignored: false
tags:
- development
- Eclipse RCP
- IT
- Java
- Preference Page
- "이클립스RCP"
- "환경설정"
---

<div class="imageblock left" style="float: left; text-align: center; padding: 10px;"><a href="http://www.mobilefish.com/developer/eclipse/eclipse.html" onclick="window.open(this.href);return false;"><img src="http://images.google.com/images?q=tbn:rFfVzEr-s4uB7M::www.mobilefish.com/images/developer/eclipse_logo_3.0.gif" alt="EclipseRCP 환경설정 페이지 사용하기(EclipseRCP Preference Page)[Preference Page,이클립스 RCP,eclipse RCP]" height="86" width="130"></a><p style="margin-top: 5px;"><span>이미지출처</span>&nbsp;: <a href="http://www.mobilefish.com/developer/eclipse/eclipse.html" onclick="window.open(this.href);return false;"><span style="color: rgb(0, 128, 0);">www.mobilefish.com</span></a></p></div><p style="font-weight: bold;"><font size="3">EclipseRCP 환경설정 페이지 사용하기(EclipseRCP Preference Page)</font></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p>1. add (org.eclipse.ui.preferencePages)extension to plugin.xml<br /><br />-  plugin.xml파일에 환경설정 확장점을 추가해준다.<br /><br />2. create new class that implements IWorkbenchPreferencePage<br /><br />- IWorkbenchPreferencePage를 구현한 클래스를 생성한다.<br /><br />3. If you need to adjust, you can make Preference constants and Preference initializer classes.<br /><br />- 필요하다면, 환경설정 상수나, 초기화 클래스관련 클래스를 생성할 수 있습니다.<br /><br />범위 : 기본, 환경, 인스턴스<br /><br />scopes : default , configuration , instance</p><br /><br /><p><b>Preference.java</b></p><br /><p class="amcode">Code:</p><div class="codeblock amc_code amc_long"><table><tbody><tr class="amc_code_odd"><td><code><span class="amc_default">public class PreferencePage</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; extends FieldEditorPreferencePage</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; implements IWorkbenchPreferencePage {</span></code></td></tr><tr class="amc_code_even"><td><code>&nbsp;</code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; public PreferencePage() {</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; super(GRID);</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; setPreferenceStore(Plugin.getDefault().getPreferenceStore());</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; setDescription("Preferences");</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; }</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; </span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; public void createFieldEditors() {</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; String[] filterExtension = { "*.file extension" };</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; addField(new DirectoryFieldEditor(PreferenceConstants.DIR_PATH, &nbsp; &nbsp; &nbsp; &nbsp; "&amp;Directory preference:", getFieldEditorParent()));</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FileFieldEditor filePathPrefEditor = new FileFieldEditor(PreferenceConstants.FILE_PATH, </span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; "&amp;File Path preference:", getFieldEditorParent());</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; filePathPrefEditor.setFileExtensions(filterExtension);</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; addField(filePathPrefEditor);</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; addField(</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; new BooleanFieldEditor(</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; PreferenceConstants.P_BOOLEAN,</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; "&amp;An example of a boolean preference",</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; getFieldEditorParent()));</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code>&nbsp;</code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; addField(new RadioGroupFieldEditor(</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; PreferenceConstants.P_CHOICE,</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; "An example of a multiple-choice preference",</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; 1,</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; new String[][] { { "&amp;Choice 1", "choice1" }, {</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; "C&amp;hoice 2", "choice2" }</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; }, getFieldEditorParent()));</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; addField(</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; new StringFieldEditor(PreferenceConstants.P_STRING, "A &amp;text preference:", getFieldEditorParent()));</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; }</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code>&nbsp;</code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; /* (non-Javadoc)</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp;&nbsp; * @see org.eclipse.ui.IWorkbenchPreferencePage#init(org.eclipse.ui.IWorkbench)</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp;&nbsp; */</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; public void init(IWorkbench workbench) {</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; }</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; </span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">}</span></code></td></tr></tbody></table></div><br /><p><b>PreferenceConstants.java</b></p><br /><p class="amcode">Code:</p><div class="codeblock amc_code amc_short"><br /><br /><br /><br /><br /><br /><br /><br /><br /><table><tbody><tr class="amc_code_odd"><td><code><span class="amc_default">public class PreferenceConstants {</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; public static final String DIR_PATH = "dirPath";</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; public static final String FILE_PATH = "filePath";</span></code></td></tr><tr class="amc_code_even"><td><code>&nbsp;</code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; public static final String P_PATH = "pathPreference";</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; public static final String P_BOOLEAN = "booleanPreference";</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; public static final String P_CHOICE = "choicePreference";</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; public static final String P_STRING = "stringPreference";</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">}</span></code></td></tr></tbody></table></div><br /><p><b>PreferenceInitializer.java</b></p><br /><p class="amcode">Code:</p><div class="codeblock amc_code amc_short"><br /><br /><br /><br /><br /><br /><table><tbody><tr class="amc_code_odd"><td><code><span class="amc_default">public class PreferenceInitializer extends AbstractPreferenceInitializer {</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; public void initializeDefaultPreferences() {</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; IPreferenceStore store = Plugin.getDefault().getPreferenceStore();</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; store.setDefault(PreferenceConstants.DIR_PATH,"C:\\Program Files");</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; }</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">}</span></code></td></tr></tbody></table></div><br /><br /><p>RadioGroupFieldEditor 사용팁<br /><br />만약 아직 지원하지 않는 값을 사용자가 클릭했을 경우, <br /><br />다음과 같이 propertyChange를 overriding하여 필드값을 Initializer에서 설정해준 값으로 불러와 변경시키는 방법을 사용 하면된다.</p><br /><br /><p class="amcode">Code:</p><div class="codeblock amc_code amc_short"><table><tbody><tr class="amc_code_odd"><td><code><span class="amc_default">public void propertyChange(PropertyChangeEvent event) {</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; super.propertyChange(event);</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; if(event.getProperty().equals(FieldEditor.VALUE)) {</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; if(event.getSource() instanceof RadioGroupFieldEditor) {</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; if(!event.getNewValue().equals("available value")){</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dialog.showWarningMessageDialog(getFieldEditorParent(), "Not available", "Sorry, Now available only for available value.");</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RadioGroupFieldEditor radioGroupEditor = (RadioGroupFieldEditor) event.getSource();</span></code></td></tr><tr class="amc_code_even"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; radioGroupEditor .loadDefault();</span></code></td></tr><tr class="amc_code_odd"><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; </span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; &nbsp; }</span></code></td></tr><tr class="amc_code_odd"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; &nbsp; }</span></code></td></tr><tr class="amc_code_even"><td class="amc_line"><br /></td><td><code><span class="amc_default">&nbsp; }</span></code></td></tr></tbody></table></div>
