---
layout: IT
title: Canjs
date: '2013-07-20'
comments: true
adsense: true
ignored: false
tags:
- canjs
- development
- framework
- IT
- javascript
- mvc
- web
---

<h2 class="summary">잘 짜여진 자바스크립트 MVC 프레임워크. Canjs</h2><p>Backbone, AngularJS, Spine&hellip;.<br />그동안 나왔던 자바스크립트 프레임워크를 조금씩 건드려는 보았지만,<br />항상 아쉬움이 남았습니다.<br />이번에 Canjs를 써보니, 정말 잘 만들어진 프레임워크라는 생각이 들어요.<br />자바스크립트MVC 프레임워크를 써 볼까 생각 중이시라면, Canjs 한번 고려해 보세요.</p><h3>can.Control</h3><p>컨트롤러에서 이벤트 처리<br /><code><br />"li .destroy {Event.destroy}": function( el, event) {<br />var todo = el.closet('li').data('todo);<br />todo.destroy();<br />event.stopPropagation();}<br />});<br />Events = {destroy : "click"};<br /></code></p><p>css Selector, html.getElementBy, $(selector)가 Control의 셀렉터로 사용된다.</p><p>When the element your Control is bound to is removed from the DOM,<br />the Control destroys itself, cleaning up any bound     event handlers.</p><p><strong>can.Control 이 아는 이벤트.</strong><br />* change<br />* click<br />* contextmenu<br />* dblclick<br />* focusin<br />* focusout<br />* keydown<br />* keyup<br />* keypress<br />* mousedown<br />* mouseenter<br />* mouseleave<br />* mousemove<br />* mouseout<br />* mouseover<br />* mouseup<br />* reset<br />* resize<br />* scroll<br />* select<br />* submit</p><h3>링크 처리 방법(How can I make a link in Canjs?)</h3><p>레이어(layer)<br /><code>&lt;a id="id" href="javascript://"&gt;href&lt;/a&gt;<br /></code><br />페이지(page)<br /><code>&lt;a id="id" href="#!id"&gt;href&lt;/a&gt;<br /></code></p><h3>무스타치에서 콜백 받기(Mustache Element Callback)</h3><p><code>{{data 'model'}}<br /></code></p><h3>경로 설정(RequireJS Paths)</h3><p>requireJS can require is /can<br />requireJS에서 canJS를 쓸 땐 can.js를 패스로 잡고 사용해야 한다.<br />registerHelper이용을 위해서는 can/view/mustache가 필요하다.</p><h3>404루트 잡기(How to define a catch all route to handle 404 in can js?)</h3><p><a title="how-to-define-a-catch-all-route-to-handle-404-in-can-js" href="http://stackoverflow.com/questions/13824665/how-to-define-a-catch-all-route-to-handle-404-in-can-js" target="_blank">http://stackoverflow.com/questions/13824665/how-to-define-a-catch-all-route-to-handle-404-in-can-js</a><br /><code><br />can.route.bind('change', function(ev, newVal) {<br />if (newVal === 'route') {<br />var valid = false;<br />$.each(can.route.routes, function(k,v) {<br />if (new RegExp(v.test).test(window.location.hash)){<br />valid = true;<br />return; //exit loop<br />}<br />})<br />if (!valid) {<br />//handle the false route here<br />}<br />}<br />});<br /></code></p><h3>다국어 지원(Localization)</h3><p>Localization is a good example of a custom helper you might implement in your application. The below example takes a given key and returns the localized value using jQuery Globalize.<br /><code><br />1. Mustache.registerHelper('l10n', function(str, options){<br />2. return Globalize != undefined<br />3. ? Globalize.localize(str)<br />4. : str;<br />5. });<br /></code></p><h3>can.route에서 i18next 데이터를 받아오지 못할 때</h3>can.when을 이용하여 초기화가 된 후 can라우팅 처리를 해 준다.<br /><p><code><br />var lang =utils.getParam('lang');<br />var i18n<em>option = {debug: true};<br />lang != undefined<br />? i18n</em>option.lng = lang<br />: i18n_option.lng = "en";<br />can.when(i18n.init(i18n_option)).then(function (){});<br /></code></p><h3>모델 관계(model associations)</h3><p><a title="questions-about-model-associations" href="https://forum.javascriptmvc.com/topic/questions-about-model-associations" target="_blank">https://forum.javascriptmvc.com/topic/questions-about-model-associations</a><br /><code><br />&lt;div class="header"&gt;<br />    &lt;h1&gt;Association&lt;/h1&gt;<br />&lt;/div&gt;<br />&lt;!-- YOUR CODE HERE --&gt;<br />&lt;div id="contacts"&gt;&lt;/div&gt;<br /><br />can.fixture("/contacts.json", function(){<br />  return [{<br />    'id': 1,<br />    'name' : 'Justin Meyer',<br />    'birthday': '1982-10-20',<br />    tasks : [{<br />      id: 1,<br />      title: "write up model layer",<br />      due: "2010-10-5"<br />    }]},{<br />    'id': 2,<br />    'name' : 'Brian Moschel',<br />    'birthday': '1983-11-10',<br />    tasks : [{<br />      id: 2,<br />      title: "write up funcunit",<br />      due: "2009-5-1"<br />    },{<br />      id: 3,<br />      title: "test funcunit",<br />      due: "2010-3-15"}]<br />    },{<br />      'id': 3,<br />      'name' : 'Bobby Joe',<br />      'birthday': '1980-2-10'<br />  }];<br />})<br /><br />can.Model.convert.date = function(raw){<br />  if(typeof raw == 'string'){<br />    var matches = raw.match(/(\d+)-(\d+)-(\d+)/);<br />      return new Date( +matches[1],<br />        (+matches[2])-1,<br />        +matches[3] );<br />  }else if(raw instanceof Date){<br />    return raw;<br />  }<br />};<br /><br />// A task model that has a date<br />can.Model("Task",{<br />  attributes : {<br />    due : 'date',<br />  }<br />},{<br />  weeksPastDue : function(){<br />    return Math.round( (new Date() - this.due) /<br />      (1000*60*60*24*7 ) );<br />  }<br />});<br /><br />// A contact model that has many tasks<br />can.Model("Contact",{<br />  attributes : {<br />    birthday : 'date',<br />    tasks: "Task.models"<br />  },<br />  findAll : "/contacts.json"<br />},{<br />  ageThisYear : function(){<br />    return new Date().getFullYear() -<br />      this.birthday.getFullYear()<br />  },<br />  getBirthday : function(){<br />    return ""+this.birthday.getFullYear()+<br />      "-"+(this.birthday.getMonth()+1)+<br />      "-"+this.birthday.getDate();<br />  }<br />});<br /><br />// Get all contacts and put them on the page<br />Contact.findAll({},function(contacts){<br />  var contactsEl = can.$('#contacts');<br /><br />  can.each(contacts, function(contact){<br />    var li = can.$('&lt;li&gt;')<br />      .html(contact.name + " "+ contact.ageThisYear())<br />      .appendTo(contactsEl);<br /><br />    var ul = can.$("&lt;ul&gt;");<br />    var tasks = contact.attr('tasks')<br />   <br />    if(tasks){<br />      tasks.each(function(){<br />        this.attr('contact', contact);<br />        ul.append('&lt;li&gt;'+this.title+" "<br />        +this.weeksPastDue()+' contact: '+ this.attr('contact.name') +'&lt;/li&gt;')<br />      });<br />    }<br /><br />    ul.appendTo(li)<br />  });<br />});<br /></code></p><p>&nbsp;</p><h3><a title="canjs" href="http://canjs.com" target="_blank">Canjs 웹사이트</a></h3>
